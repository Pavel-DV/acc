<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>Accel</title>
</head>
<body>

<button id="accelPermsButton" onclick="getAccel()" style="height:50px;">Get Accelerometer Permissions</button>

<script>
    init();

    function init() {
        try {
            window.addEventListener('deviceorientation', event => {
                // document.body.innerHTML = `${event.alpha} <br/> ${event.beta} <br/> ${event.gamma}`;
            });
            window.addEventListener('devicemotion', event => {
                document.body.innerHTML = `${event.acceleration.x} <br/> ${event.acceleration.y} <br/> ${event.acceleration.z}`
                    + ` <br/> ${event.accelerationIncludingGravity.x} <br/> ${event.accelerationIncludingGravity.y} <br/> ${event.accelerationIncludingGravity.z}`;
            });
        } catch (e) {
            document.body.innerHTML = e;
        }
    }
    function getAccel() {
        document.body.innerHTML = 'ssssssssssss';

        try {
            DeviceMotionEvent.requestPermission().then(response => {
                try {
                    document.body.innerHTML = response;
                    if (response === 'granted') {
                        init();
                    }
                } catch (e) {
                    document.body.innerHTML = e;
                }
            });
        } catch (e) {
            document.body.innerHTML = e;
        }
    }
</script>

</body>
</html>
